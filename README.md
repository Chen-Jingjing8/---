# 无人机充电站管理
此为算法设计综合实验课程大作业，共2人完成

基于多个算法设计，充分解决约束条件下离散资源的调度工作

本仓库为课程大作业：题目五“无人机充电站管理”的实现。包含若干基于 C++ 的练习题（task1..task7）、一个用于前端与后端交互的轻量 Python 桥接服务，以及前端静态资源。

## 题目要求

**【问题描述】**

无人机集群执行任务时，如果临时遇到机群电量不足的情况，则需要在相应充电站进行充电。假设无人机充电站是一个可以停放n架无人机的狭长通道，只有一个入口可供无人机进出。每架无人机从外面进入充电站前都会经过门外的便道，无人机在充电站内按到达的先后顺序依次排列进行充电，如果充电站内已停满无人机，则后来的无人机只能依次在便道上等候，一旦充电站内有无人机离开后，排在便道上的第一架无人机即可进入；当充电站内某架无人机要离开时，在它之后进入的无人机必须先退出充电站为它让路，待该无人机飞出充电站后，为它让路的无人机再按原次序进入充电站继续充电。假设便道上停的无人机数量不做限制。每架无人机在它离开充电站时必须按它充电时间的长短计算所充电量。试为充电站编制按上述要求进行管理的模拟程序。

**【基本要求】**

    以栈模拟充电站，以队列模拟充电站外的便道，按照从终端读入的输入数据序列进行模拟管理。每一组输入数据包括三个数据项：无人机“到达”或者“离去”的信息、无人机编号信息、无人机到达或离去的时刻。对每一组输入数据进行操作后的输出信息为：若是无人机到达，则输出无人机在充电站内或便道上的停靠位置；若是无人机离去，则输出无人机在充电站内停留的时间和所充电量（在便道上停靠时没有充电）。栈以顺序结构实现，队列以链表结构实现。

**【实现提示】**

需另设一个栈，临时停靠为给要离去的无人机让路而从充电站退出的无人机，也用顺利存储结构实现。输入数据按到达或离去的时刻有序。栈中每个元素表示一架无人机，包含两个数据项：无人机的编号信息和进入充电站的时刻。

**【测试数据】**

设n=2，输入数据为：（a，1,5），（a，2,10），（d，1,15），（a，3,20），（a，4,25），（a，5,30），（d，2,35），（d，4,40），（e，0,0）。其中，a表示到达（arrive）；d表示离开（departure）；e表示结束（end）。

**【必选内容】**

    （1）     两个栈共享空间，思考应开辟数组的空间是多少？（10分）

    （2）     无人机可以有不同种类，而不同种类的无人机每小时充电量不同，因此同样时间内所充电量总和也有所不同。如B型无人机每小时充电量为A型无人机的1.5倍，而C型无人机每小时充电量是A型无人机的3倍。请思考如何修改程序以满足这种要求。（10分）

    （3）     停靠在便道上的无人机也可进行充电，只是充电速度比充电站内的速度更慢，在无人机离开时也必须按它充电时间的长短计算所充的电量总和，请思考如何修改结构以满足这种要求。（10分）

    （4）     假设在无人机群组充电过程中，突然接到紧急任务必须立刻执行：需要立马安排x架A型无人机、y架B型无人机、z架C型无人机飞出充电站执行任务，任务大约需完成m个工作量。充电站内停下的无人机总数存在两种情况：①大于等于x+y+z；②小于x+y+z，因此也可能需要调用便道上的无人机，而便道上的无人机所储电量还较低，充电速度也较慢。已知：①单位时间内1架B型无人机可完成的工作量是1架A型无人机的2倍，1架C型无人机可完成的工作量是1架A型无人机的2.5倍；②无人机执行任务时的用电速度是其自身充电速度的1.5倍；③充电站内+便道上所有无人机数量总和=3x+y+2z；④每个无人机在充电之初自身所储电量只有20%，假设接到任务时所有无人机已充电4.5个小时。⑤执行任务时若电量低于20%需立马回充电站继续排队充电。请综合考虑以上因素，设计一套最优调度算法，使得这个任务在执行过程中所使用的无人机数量更少，能耗更低。 （30分）

    （5）     实战中发现单入口瓶颈明显，现把狭长充电站改造成“双入口”：入口 A（西口）只允许到达的无人机进入；入口 B（东口）只允许离开的无人机出去；离站无人机后方所有机必须临时退到让路栈，再按原次序推回，该如何设计双端顺序栈+链式便道+临时让路顺序栈的三栈协同算法，并实时统计一次离站事件的最大让路深度？（30分）

    （6）     除上述要求功能外还可考虑扩充功能。（10分）

**主要特性**

- 多个题目（`src/task1.cpp` ~ `src/task7.cpp`）的 C++ 实现
- 一个用于与浏览器交互的后端桥接：`web/backend_bridge.py`（基于 Flask）
- 前端静态页面与 JS：位于 `web/` 目录

**项目结构**

```
./
  compile_fixed.bat      # 一键编译脚本（Windows）
  bin/                  # 编译输出（可忽略 / .gitignore 中排除）
  data/                 # 测试数据（如 task6_registrations.json）
  src/                  # C++ 源文件（task1.cpp .. task7.cpp）
  web/                  # 前端与后端桥接
    backend_bridge.py   # Flask 后端桥接
    index.html
    *.js, *.css, 启动脚本
```

**先决要求（示例为 Windows）**

- C++ 编译器（g++ / MinGW 或 Visual Studio）
- Python 3.8+（用于 `web/backend_bridge.py`）

**快速上手（Windows）**

1) 编译cpp文件：双击项目目录下的compile_fixed.bat文件
2) 运行前端：双击web文件夹下的start_server.bat文件
